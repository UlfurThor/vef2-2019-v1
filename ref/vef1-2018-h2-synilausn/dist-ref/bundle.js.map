{"version":3,"file":"bundle.js","sources":["../src/lib/helpers.js","../src/lib/storage.js","../src/lib/list.js","../src/lib/item.js","../src/lib/lecture.js","../src/index.js"],"sourcesContent":["export function empty(element) {\r\n  while (element.firstChild) {\r\n    element.removeChild(element.firstChild);\r\n  }\r\n}\r\n\r\nexport function el(name, ...children) {\r\n  const element = document.createElement(name);\r\n\r\n  if (Array.isArray(children)) {\r\n    for (let child of children) { /* eslint-disable-line */\r\n      if (typeof child === 'string') {\r\n        element.appendChild(document.createTextNode(child));\r\n      } else if (child) {\r\n        element.appendChild(child);\r\n      }\r\n    }\r\n  }\r\n\r\n  return element;\r\n}\r\n","const LOCALSTORAGE_KEY = 'saved_lectures';\r\n\r\nexport function loadSavedLectures() {\r\n  const savedJson = localStorage.getItem(LOCALSTORAGE_KEY);\r\n  const saved = JSON.parse(savedJson) || [];\r\n\r\n  return saved;\r\n}\r\n\r\nexport function saveLecture(slug) {\r\n  const saved = loadSavedLectures();\r\n\r\n  const index = saved.indexOf(slug);\r\n\r\n  if (index >= 0) {\r\n    saved.splice(index, 1);\r\n  } else {\r\n    saved.push(slug);\r\n  }\r\n\r\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(saved));\r\n}\r\n","import { el, empty } from './helpers';\r\nimport { loadSavedLectures } from './storage';\r\n\r\nexport default class List {\r\n  constructor() {\r\n    this.container = document.querySelector('.list');\r\n    this.filters = document.querySelectorAll('.filters__filter');\r\n    this.url = 'lectures.json';\r\n  }\r\n\r\n  setContent(...content) {\r\n    empty(this.container);\r\n\r\n    content.forEach((item) => {\r\n      const contentToShow = typeof item === 'string'\r\n        ? document.createTextNode(item) : item;\r\n\r\n      this.container.appendChild(contentToShow);\r\n    });\r\n  }\r\n\r\n  setError(error) {\r\n    const errorElement = el('div', error);\r\n    errorElement.classList.add('list__error');\r\n    this.setContent(errorElement);\r\n  }\r\n\r\n  loadLectures() {\r\n    return fetch(this.url)\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error('Gat ekki sótt fyrirlestra');\r\n        }\r\n        return res.json();\r\n      });\r\n  }\r\n\r\n  filterLectures(data) {\r\n    const activeFilters = Array.from(this.filters)\r\n      .filter(i => i.classList.contains('filters__filter--active'))\r\n      .map(i => i.dataset.category);\r\n\r\n    return data.filter(i => activeFilters.length === 0 || activeFilters.indexOf(i.category) >= 0);\r\n  }\r\n\r\n  addSavedLectures(data) {\r\n    const saved = loadSavedLectures();\r\n\r\n    return data.map((i) => {\r\n      i.finished = saved.indexOf(i.slug) >= 0; /* eslint-disable-line */\r\n\r\n      return i;\r\n    });\r\n  }\r\n\r\n  renderItem(data) {\r\n    const image = el('div');\r\n    image.classList.add('listItem__image');\r\n\r\n    if (data.thumbnail) {\r\n      const img = el('img');\r\n      img.setAttribute('src', data.thumbnail);\r\n      img.setAttribute('alt', '');\r\n      image.appendChild(img);\r\n    } else {\r\n      image.classList.add('listItem__image--empty');\r\n    }\r\n\r\n    const category = el('span', data.category);\r\n    category.classList.add('listItem__category');\r\n\r\n    const heading = el('h2', data.title);\r\n    heading.classList.add('listItem__title');\r\n\r\n    const textElements = el('div', category, heading);\r\n    textElements.classList.add('listItem__texts');\r\n\r\n    const text = el('div', textElements);\r\n    text.classList.add('listItem__bottom');\r\n\r\n    if (data.finished) {\r\n      const finished = el('div', '✓');\r\n      finished.classList.add('listItem__finished');\r\n      text.appendChild(finished);\r\n    }\r\n\r\n    const item = el('a', image, text);\r\n    item.classList.add('listItem');\r\n    item.setAttribute('href', `fyrirlestur.html?slug=${data.slug}`);\r\n\r\n    return item;\r\n  }\r\n\r\n  renderLectures(data) {\r\n    const items = data.map((item) => {\r\n      const col = el('div', this.renderItem(item));\r\n      col.classList.add('list__col');\r\n      return col;\r\n    });\r\n\r\n    const row = el('div', ...items);\r\n    row.classList.add('list__row');\r\n\r\n    this.setContent(row);\r\n  }\r\n\r\n  toggleFilter(e) {\r\n    const { target } = e;\r\n    target.classList.toggle('filters__filter--active');\r\n\r\n    // todo refactor\r\n    this.loadLectures()\r\n      .then(data => this.addSavedLectures(data.lectures))\r\n      .then(data => this.filterLectures(data))\r\n      .then(data => this.renderLectures(data))\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setError(error.message);\r\n      });\r\n  }\r\n\r\n  setupFilters() {\r\n    this.filters.forEach((filter) => {\r\n      filter.addEventListener('click', this.toggleFilter.bind(this));\r\n    });\r\n  }\r\n\r\n  load() {\r\n    this.loadLectures()\r\n      .then(data => this.addSavedLectures(data.lectures))\r\n      .then(data => this.filterLectures(data))\r\n      .then(data => this.renderLectures(data))\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setError(error.message);\r\n      });\r\n\r\n    this.setupFilters();\r\n  }\r\n}\r\n","import { el } from './helpers';\r\n\r\nfunction item(type, ...data) {\r\n  const content = el('div', ...data);\r\n  content.classList.add('item__content');\r\n\r\n  const wrapper = el('div', content);\r\n  wrapper.classList.add('item', `item--${type}`);\r\n\r\n  return wrapper;\r\n}\r\n\r\nexport function text(data) {\r\n  const split = data.split('\\n');\r\n\r\n  const texts = split.map((t) => {\r\n    const p = el('p', t);\r\n    p.classList.add('item__text');\r\n    return p;\r\n  });\r\n\r\n  return item('text', ...texts);\r\n}\r\n\r\nexport function quote(data, attribute) {\r\n  const quoteText = el('p', data);\r\n  quoteText.classList.add('item__quote');\r\n\r\n  const quoteAttribute = el('p', attribute);\r\n  quoteAttribute.classList.add('item__attribute');\r\n\r\n  const blockquote = el('blockquote', quoteText, quoteAttribute);\r\n\r\n  return item('blockquote', blockquote);\r\n}\r\n\r\nexport function heading(data) {\r\n  const element = el('h3', data);\r\n  element.classList.add('item__heading');\r\n\r\n  return item('heading', element);\r\n}\r\n\r\nexport function list(data) {\r\n  const items = data.map((i) => {\r\n    const li = el('li', i);\r\n    li.classList.add('item__li');\r\n    return li;\r\n  });\r\n\r\n  const ul = el('ul', ...items);\r\n  ul.classList.add('item__ul');\r\n\r\n  return item('list', ul);\r\n}\r\n\r\nexport function code(data) {\r\n  const element = el('pre', data);\r\n  element.classList.add('item__code');\r\n\r\n  return item('code', element);\r\n}\r\n\r\nexport function youtube(url) {\r\n  const iframe = el('iframe');\r\n  iframe.classList.add('item__iframe');\r\n  iframe.setAttribute('src', url);\r\n  iframe.setAttribute('frameborder', 0);\r\n  iframe.setAttribute('allowfullscreen', true);\r\n\r\n  return item('youtube', iframe);\r\n}\r\n\r\nexport function image(data, caption) {\r\n  const imageElement = el('img');\r\n  imageElement.classList.add('image__img');\r\n  imageElement.setAttribute('alt', caption);\r\n  imageElement.setAttribute('src', data);\r\n\r\n  const imageAttribution = el('p', caption);\r\n  imageAttribution.classList.add('item__caption');\r\n\r\n  const blockquote = el('div', imageElement, imageAttribution);\r\n\r\n  return item('image', blockquote);\r\n}\r\n","import { el, empty } from './helpers';\r\nimport { saveLecture, loadSavedLectures } from './storage';\r\nimport {\r\n  youtube, text, quote, list, code, heading, image,\r\n} from './item';\r\n\r\nexport default class Lecture {\r\n  constructor() {\r\n    this.container = document.querySelector('.lecture');\r\n    this.url = 'lectures.json';\r\n  }\r\n\r\n  loadLecture(slug) {\r\n    return fetch(this.url)\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error('Gat ekki sótt fyrirlestra');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        const found = data.lectures.find(i => i.slug === slug);\r\n\r\n        if (!found) {\r\n          throw new Error('Fyrirlestur fannst ekki');\r\n        }\r\n\r\n        return found;\r\n      });\r\n  }\r\n\r\n  setContent(...content) {\r\n    empty(this.container);\r\n\r\n    content.forEach((item) => {\r\n      const contentToShow = typeof item === 'string'\r\n        ? document.createTextNode(item) : item;\r\n\r\n      this.container.appendChild(contentToShow);\r\n    });\r\n  }\r\n\r\n  setError(error) {\r\n    const header = this.createHeader({ category: 'Villa', title: error });\r\n    const footer = this.createFooter();\r\n    this.setContent(header, footer);\r\n  }\r\n\r\n  createHeader(data) {\r\n    const category = el('span', data.category);\r\n    category.classList.add('heading__category');\r\n    const headingElement = el('h2', data.title);\r\n    headingElement.classList.add('heading__title');\r\n    const headingWrapper = el('div', category, headingElement);\r\n    headingWrapper.classList.add('heading');\r\n\r\n    if (data.image) {\r\n      headingWrapper.style.backgroundImage = `url(${data.image})`;\r\n    }\r\n\r\n    return headingWrapper;\r\n  }\r\n\r\n  createContent(content) {\r\n    const col = el('div');\r\n    col.classList.add('lecture__col');\r\n    const row = el('div', col);\r\n    row.classList.add('lecture__row');\r\n    const wrapper = el('div', row);\r\n    wrapper.classList.add('lecture__content');\r\n\r\n    content.forEach((i) => {\r\n      let item;\r\n      switch (i.type) {\r\n        case 'youtube':\r\n          item = youtube(i.data);\r\n          break;\r\n        case 'text':\r\n          item = text(i.data);\r\n          break;\r\n        case 'list':\r\n          item = list(i.data);\r\n          break;\r\n        case 'heading':\r\n          item = heading(i.data);\r\n          break;\r\n        case 'code':\r\n          item = code(i.data);\r\n          break;\r\n        case 'quote':\r\n          item = quote(i.data, i.attribute);\r\n          break;\r\n        case 'image':\r\n          item = image(i.data, i.caption);\r\n          break;\r\n        default:\r\n          item = el('div', i.type);\r\n      }\r\n\r\n      col.appendChild(item);\r\n    });\r\n\r\n    return wrapper;\r\n  }\r\n\r\n  markFinished(slug, e) {\r\n    const { target } = e;\r\n\r\n    const isFinished = target.classList.contains('lecture__finish--finished');\r\n\r\n    if (isFinished) {\r\n      target.textContent = 'Klára fyrirlestur';\r\n    } else {\r\n      target.textContent = '✓ Fyrirlestur kláraður';\r\n    }\r\n\r\n    target.classList.toggle('lecture__finish--finished');\r\n\r\n    saveLecture(slug, !isFinished);\r\n  }\r\n\r\n  createFooter(slug, finished) {\r\n    const finish = el('button', finished ? '✓ Fyrirlestur kláraður' : 'Klára fyrirlestur');\r\n    finish.classList.add('lecture__finish');\r\n\r\n    if (finished) {\r\n      finish.classList.add('lecture__finish--finished');\r\n    }\r\n\r\n    finish.addEventListener('click', this.markFinished.bind(this, slug));\r\n\r\n    const back = el('a', 'Til baka');\r\n    back.classList.add('lecture__back');\r\n    back.setAttribute('href', '/');\r\n\r\n    const footer = el('footer', finish, back);\r\n    footer.classList.add('lecture__footer');\r\n\r\n    return footer;\r\n  }\r\n\r\n  renderLecture(data) {\r\n    const header = this.createHeader(data);\r\n    const content = this.createContent(data.content);\r\n    const footer = this.createFooter(data.slug, this.checkFinished(data.slug));\r\n\r\n    this.setContent(header, content, footer);\r\n  }\r\n\r\n  checkFinished(slug) {\r\n    const saved = loadSavedLectures();\r\n\r\n    return saved.indexOf(slug) >= 0;\r\n  }\r\n\r\n  load() {\r\n    const qs = new URLSearchParams(window.location.search);\r\n    const slug = qs.get('slug');\r\n\r\n    if (!slug || slug === '') {\r\n      this.setError('Engin fyrirlestur skilgreindur');\r\n      return;\r\n    }\r\n\r\n    this.loadLecture(slug)\r\n      .then(data => this.renderLecture(data))\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setError(error.message);\r\n      });\r\n  }\r\n}\r\n","import List from './lib/list';\r\nimport Lecture from './lib/lecture';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const page = document.querySelector('body');\r\n  const isLecturePage = page.classList.contains('lecture-page');\r\n\r\n  if (isLecturePage) {\r\n    const lecture = new Lecture();\r\n    lecture.load();\r\n  } else {\r\n    const list = new List();\r\n    list.load();\r\n  }\r\n});\r\n"],"names":["empty","element","firstChild","removeChild","el","name","document","createElement","children","Array","isArray","child","appendChild","createTextNode","LOCALSTORAGE_KEY","loadSavedLectures","savedJson","localStorage","getItem","saved","JSON","parse","saveLecture","slug","index","indexOf","splice","push","setItem","stringify","List","container","querySelector","filters","querySelectorAll","url","content","forEach","item","contentToShow","error","errorElement","classList","add","setContent","fetch","then","res","ok","Error","json","data","activeFilters","from","filter","i","contains","map","dataset","category","length","finished","image","thumbnail","img","setAttribute","heading","title","textElements","text","items","col","renderItem","row","e","target","toggle","loadLectures","addSavedLectures","lectures","filterLectures","renderLectures","catch","console","setError","message","addEventListener","toggleFilter","bind","setupFilters","type","wrapper","split","texts","t","p","quote","attribute","quoteText","quoteAttribute","blockquote","list","li","ul","code","youtube","iframe","caption","imageElement","imageAttribution","Lecture","found","find","header","createHeader","footer","createFooter","headingElement","headingWrapper","style","backgroundImage","isFinished","textContent","finish","markFinished","back","createContent","checkFinished","qs","URLSearchParams","window","location","search","get","loadLecture","renderLecture","page","isLecturePage","lecture","load"],"mappings":"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"}